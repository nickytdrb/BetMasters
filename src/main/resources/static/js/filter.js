const stixoimatikes = [

    {
        "name": "Novibet",
        "info1": "Πάνω από 30,000 αγορές καθημερινά",
        "info2": "Πλούσιο Live με Cash Out και Live Streaming",
        "info3": "Δωρεάν συναλλαγές, πολλές μέθοδοι",
        "info4": "24/7 εξυπηρέτηση στα ελληνικά",
        "rating": 100,
        "stars": 5,
        "image": "/images/banner3.jpg",
        "link": "https://www.novibet.gr"
    },

    {
        "name": "BetRebels",
        "info1": "Εξαιρετικές αποδόσεις στο ποδόσφαιρο",
        "info2": "Πολλά ειδικά στο ποδόσφαιρο και ασιατικά χάντικαπ",
        "info3": "Ασιατικά χάντικαπ και δυνατότητα Cash Out",
        "info4": "Πολύ καλή πλατφόρμα Live Betting με Live Streaming",
        "rating": 100,
        "stars": 5,
        "image": "/images/banner8.jpg",
        "link": "https://www.betrebels.gr"
    },

    {
        "name": "Bet365",
        "info1": "Βελτιωμένο προϊόν με αρκετά ειδικά",
        "info2": "Ασιατικά χάντικαπ και Cash Out",
        "info3": "Ποικιλία μεθόδων συναλλαγών",
        "info4": "Καταθέσεις από 1€",
        "rating": 100,
        "stars": 5,
        "image": "/images/banner14.jpg",
        "link": "https://www.bet365.gr"
    },


    {
        "name": "Betshop",
        "info1": "Παραδοσιακή πλατφόρμα με παγκόσμιο brand name",
        "info2": "Πολύ καλές αποδόσεις στα φαβορί και ασιατικά χάντικαπ",
        "info3": "Πρόγραμμα επιβράβευσης για όλους",
        "info4": "Πλούσιο Live Betting με Cash Out",
        "rating": 98,
        "stars": 4.5,
        "image": "/images/banner5.jpg",
        "link": "https://www.betshop.gr"
    },

    {
        "name": "Bwin",
        "info1": "Μεγάλη γκάμα αγορών, πολλά ειδικά σε ποδόσφαιρο και τέννις",
        "info2": "Καλές αποδόσεις, Cash Out και ασιατικά χάντικαπ",
        "info3": "Κορυφαίο Live, με Asian View και Fast Markets",
        "info4": "Υψηλά όρια, Πρόγραμμα VIP",
        "rating": 95,
        "stars": 4.5,
        "image": "/images/banner2.jpg",
        "link": "https://sports.bwin.gr/el/sports"
    },

    {
        "name": "Pame Stoixima",
        "info1": "Πολλά ειδικά παικτών στο μπάσκετ",
        "info2": "Δωρεάν και γρήγορες πληρωμές",
        "info3": "Πολύ καλό mobile και app",
        "info4": "Κορυφαία αξιοπιστία",
        "rating": 95,
        "stars": 4.5,
        "image": "/images/banner7.jpg",
        "link": "https://www.pamestoixima.gr/home"
    },

    {
        "name": "VistaBet",
        "info1": "Παγκόσμιο brand name, από τις πλέον αξιόπιστες",
        "info2": "Ανταγωνιστικές αποδόσεις με Cash Out",
        "info3": "Πλούσιο Live Betting με Live Streaming",
        "info4": "Ασιατικά στοιχήματα και εναλλακτικά χάντικαπ",
        "rating": 94,
        "stars": 4.5,
        "image": "/images/banner10.jpg",
        "link": "https://sports.vistabet.gr/el/sports"
    },

    {
        "name": "NetBet",
        "info1": "Πληθώρα ειδικών στοιχημάτων και fun bets",
        "info2": "Στοίχημα σε κορυφαίες αποδόσεις και Live Streaming",
        "info3": "Ανταγωνιστικές αποδόσεις και ασιατικά χάντικαπ",
        "info4": "Πολλές μέθοδοι συναλλαγών, αναλήψεις εντός 24 ωρών",
        "rating": 92,
        "stars": 4,
        "image": "/images/banner4.jpg",
        "link": "https://www.netbet.gr"
    },

    {
        "name": "GoalBet",
        "info1": "Νέα εύχρηστη πλατφόρμα για pc και κινητό",
        "info2": "24/7 support στα ελληνικά",
        "info3": "Καθημερινές προσφορές",
        "info4": "Πλούσιο Live με ζωντανές μεταδόσεις και Cash-Out",
        "rating": 92,
        "stars": 4,
        "image": "/images/banner13.jpg",
        "link": "https://www.goalbet.gr/index2.php?"
    },

    {
        "name": "ChampionsBet",
        "info1": "Ανταγωνιστικές αποδόσεις και Cash Out",
        "info2": "Κορυφαίο Live με ασιατικά χάντικαπ και Streaming",
        "info3": "Πρόγραμμα ανταμοιβής",
        "info4": "Πολλές μέθοδοι συναλλαγών, δωρεάν αναλήψεις",
        "rating": 90,
        "stars": 4,
        "image": "/images/banner11.jpg",
        "link": "https://www.championsbet.gr/sportsbook"
    },

    {
        "name": "Stoiximan",
        "info1": "Πληθώρα αγορών και ειδικών στοιχημάτων pre-game και live",
        "info2": "Δωρεάν και άμεσες πληρωμές",
        "info3": "Εξαιρετικό mobile και app",
        "info4": "Καινοτόμες προσφορές",
        "rating": 89,
        "stars": 4,
        "image": "/images/banner1.jpg",
        "link": "https://www.stoiximan.gr"
    },


    {
        "name": "Interwetten",
        "info1": "Bonus Booster πρόγραμμα ανταμοιβής",
        "info2": "Πριμ 200 στα κερδισμένα παρολί",
        "info3": "Επιβράβευση στα νέα μέλη",
        "info4": "Cash-Out και ασιατικά χάντικαπ",
        "rating": 89,
        "stars": 4,
        "image": "/images/banner6.jpg",
        "link": "https://www.interwetten.gr"
    },


    {
        "name": "SportingBet",
        "info1": "Ευελιξία στις συναλλαγές και δωρεάν αναλήψεις",
        "info2": "24ωρη εξυπηρέτηση στα Ελληνικά",
        "info3": "Καθημερινές προσφορές",
        "info4": "Πολύ καλό Live Betting με Streaming και Cash Out",
        "rating": 88,
        "stars": 4,
        "image": "/images/banner9.jpg",
        "link": "https://www.sportingbet.gr"
    },


    {
        "name": "WinMasters",
        "info1": "Μοντέρνα σελίδα, πρόσφατα ανανεωμένη",
        "info2": "Πολλές αγορές σε ποδόσφαιρο και μπάσκετ",
        "info3": "Ασιατικά χάντικαπ και δυνατότητα Cash Out",
        "info4": "Μηνιαία επιβράβευση",
        "rating": 88,
        "stars": 4,
        "image": "/images/banner12.jpg",
        "link": "https://www.winmasters.gr"
    }


];

const name1 = document.querySelector("#name1");
const form = document.querySelector("#form");
const vathmologia = document.querySelector("#vathmologia");
const etaireiesBox = document.querySelector("#etaireies");
const selectedVathmologiaVal = document.querySelector("#selected_vathmologia");
const rating = document.querySelector("#rating");
const etaireiesDataList = document.querySelector("#etaireia_list");

const etaireies = [];
let options = "";
for (let i = 0; i < stixoimatikes.length; i++) {
    if (etaireies.indexOf(stixoimatikes[i].name) < 0) {
        etaireies.push(stixoimatikes[i].name);
        options += `<option value="${stixoimatikes[i].name}"></option>`
    }
}
etaireiesDataList.innerHTML = options;
console.log(etaireies);

let filteredEtaireies = stixoimatikes;
console.log(filteredEtaireies);
let selectedEtaireia = null;
let selectedVathmologia = 88;
let selectedRating = 5;

function byRating(etaireia) {
    return etaireia.stars <= selectedRating;
}

function byName(etaireia) {
    if (selectedEtaireia) {
        return etaireia.name.toLowerCase() === selectedEtaireia.toLowerCase();
    } else {
        return true;
    }
}

function byVathmologia(etaireia) {
    console.log(etaireia.rating);
    return etaireia.rating <= selectedVathmologia;
}

function filterEtaireies() {
    console.log(selectedVathmologia, selectedRating, selectedEtaireia);
    filteredEtaireies = stixoimatikes.filter(function (etaireia) {
        return byName(etaireia) && byRating(etaireia) && byVathmologia(etaireia);
    });
    console.log(filteredEtaireies);
    displayEtaireies();
}

function handleRatingChange(event) {
    selectedRating = parseInt(event.target.value);
    filterEtaireies();
}

function handleSubmit(event) {
    event.preventDefault();
    console.log("skata");
    selectedEtaireia = name1.value;
    console.log(selectedEtaireia);
    filterEtaireies();
}

function handleVathmologiaInput(event) {
    selectedVathmologiaVal.innerText = event.target.value;
}

function handleVathmologiaChange(event) {
    selectedVathmologia = parseInt(event.target.value);
    filterEtaireies();
}

function displayEtaireies() {

    etaireiesBox.innerHTML = "";
    // Loop over hotels list, for each hotel render some HTML
    let etaireiesOutput = "";
    filteredEtaireies.map(function (i) {
        etaireiesOutput += `
              <div class="etaireies">
                <p><b> ${i.name} </b></p>
                 <img src="${i.image}"/>
                <hr>					
               <div class="col-md-8">
 				 <ul class="no_bullet">
 				 <li class="tick"> ${i.info1}</li>
                                 <li class="tick"> ${i.info2}</li>
                                 <li class="tick"> ${i.info3}</li>
                                 <li class="tick"> ${i.info4}</li>
                               </ul><hr>
 			<p>Βαθμολογία: ${i.rating} /100</p>
               <p>Stars: ${i.stars} </p>
               <a href=${i.link}>${i.link}</a>
              </div>
              </div>
            `;
    });
    etaireiesBox.innerHTML = etaireiesOutput;
}

rating.addEventListener("change", handleRatingChange);
vathmologia.addEventListener("input", handleVathmologiaInput);
vathmologia.addEventListener("change", handleVathmologiaChange);
form.addEventListener("submit", handleSubmit);

displayEtaireies();
